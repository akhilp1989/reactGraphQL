{"ast":null,"code":"import { takeLatest, put, call, all } from 'redux-saga/effects';\nimport userActionConstants from './userActionConstants';\nimport { googleProvider, auth, createUserProfileDocument } from '../../FireBase/firebase.utils';\nimport { googleSignInSuccess, googleSignInFailed, emailSignInSuccess, emailSignFailed } from './user.action';\nexport function* signInWithGoogle() {\n  try {\n    const {\n      user\n    } = yield auth.signInWithPopup(googleProvider);\n    const userRef = yield call(createUserProfileDocument, user);\n    const userSnapshot = yield userRef.get(); //console.log('userSnapshotData->',userSnapshot.data())\n\n    yield put(googleSignInSuccess({\n      id: userSnapshot.id,\n      ...userSnapshot.data()\n    }));\n  } catch (error) {\n    yield put(googleSignInFailed(error));\n  }\n}\nexport function* signInWithEmail({\n  payload: {\n    email,\n    password\n  }\n}) {\n  try {\n    const {\n      user\n    } = yield auth.signInWithEmailAndPassword(email, password); //console.log('user->',user)\n\n    const userRef = yield call(createUserProfileDocument, user);\n    const userSnapshot = yield userRef.get(); //console.log('userSnapshotData->',userSnapshot.data())\n\n    yield put(emailSignInSuccess({\n      id: userSnapshot.id,\n      ...userSnapshot.data()\n    }));\n  } catch (error) {\n    yield put(emailSignFailed(error));\n  }\n}\nexport function* onGoogleSignInStart() {\n  yield takeLatest(userActionConstants.GOOGLE_SIGNIN_START, signInWithGoogle);\n}\nexport function* onEmailSignInStart() {\n  yield takeLatest(userActionConstants.EMAIL_SIGNIN_START, signInWithEmail);\n}\nexport function* userSaga() {\n  yield all([call(onGoogleSignInStart), call(onEmailSignInStart)]);\n}","map":{"version":3,"sources":["/Users/akhil.parashara/Documents/graphqlreact/ecommerce-project/src/Redux/User/user.sagas.js"],"names":["takeLatest","put","call","all","userActionConstants","googleProvider","auth","createUserProfileDocument","googleSignInSuccess","googleSignInFailed","emailSignInSuccess","emailSignFailed","signInWithGoogle","user","signInWithPopup","userRef","userSnapshot","get","id","data","error","signInWithEmail","payload","email","password","signInWithEmailAndPassword","onGoogleSignInStart","GOOGLE_SIGNIN_START","onEmailSignInStart","EMAIL_SIGNIN_START","userSaga"],"mappings":"AAAA,SAAQA,UAAR,EAAmBC,GAAnB,EAAuBC,IAAvB,EAA4BC,GAA5B,QAAsC,oBAAtC;AACA,OAAOC,mBAAP,MAAgC,uBAAhC;AACA,SAAQC,cAAR,EAAuBC,IAAvB,EAA4BC,yBAA5B,QAA4D,+BAA5D;AACA,SAAQC,mBAAR,EAA4BC,kBAA5B,EAA+CC,kBAA/C,EAAkEC,eAAlE,QAAwF,eAAxF;AAGA,OAAO,UAAUC,gBAAV,GAA4B;AAChC,MAAG;AACF,UAAM;AAACC,MAAAA;AAAD,QAAO,MAAMP,IAAI,CAACQ,eAAL,CAAqBT,cAArB,CAAnB;AACA,UAAMU,OAAO,GAAC,MAAMb,IAAI,CAACK,yBAAD,EAA2BM,IAA3B,CAAxB;AACA,UAAMG,YAAY,GAAC,MAAMD,OAAO,CAACE,GAAR,EAAzB,CAHE,CAIF;;AACA,UAAMhB,GAAG,CAACO,mBAAmB,CAAC;AAACU,MAAAA,EAAE,EAACF,YAAY,CAACE,EAAjB;AAAoB,SAAGF,YAAY,CAACG,IAAb;AAAvB,KAAD,CAApB,CAAT;AACH,GANE,CAOH,OAAMC,KAAN,EAAY;AACR,UAAMnB,GAAG,CAACQ,kBAAkB,CAACW,KAAD,CAAnB,CAAT;AACH;AACA;AAED,OAAO,UAAUC,eAAV,CAA2B;AAACC,EAAAA,OAAO,EAAC;AAACC,IAAAA,KAAD;AAAOC,IAAAA;AAAP;AAAT,CAA3B,EAAsD;AACzD,MAAG;AACC,UAAM;AAACX,MAAAA;AAAD,QAAO,MAAMP,IAAI,CAACmB,0BAAL,CAAgCF,KAAhC,EAAsCC,QAAtC,CAAnB,CADD,CAEC;;AACA,UAAMT,OAAO,GAAC,MAAMb,IAAI,CAACK,yBAAD,EAA2BM,IAA3B,CAAxB;AACA,UAAMG,YAAY,GAAC,MAAMD,OAAO,CAACE,GAAR,EAAzB,CAJD,CAKH;;AACA,UAAMhB,GAAG,CAACS,kBAAkB,CAAC;AAACQ,MAAAA,EAAE,EAACF,YAAY,CAACE,EAAjB;AAAoB,SAAGF,YAAY,CAACG,IAAb;AAAvB,KAAD,CAAnB,CAAT;AACC,GAPD,CAQA,OAAMC,KAAN,EAAY;AACT,UAAMnB,GAAG,CAACU,eAAe,CAACS,KAAD,CAAhB,CAAT;AACF;AACJ;AAED,OAAO,UAAUM,mBAAV,GAAgC;AACnC,QAAM1B,UAAU,CAACI,mBAAmB,CAACuB,mBAArB,EAAyCf,gBAAzC,CAAhB;AACH;AAID,OAAO,UAAUgB,kBAAV,GAA8B;AACjC,QAAM5B,UAAU,CAACI,mBAAmB,CAACyB,kBAArB,EAAwCR,eAAxC,CAAhB;AACH;AAED,OAAO,UAAUS,QAAV,GAAoB;AACvB,QAAM3B,GAAG,CAAC,CAACD,IAAI,CAACwB,mBAAD,CAAL,EAA2BxB,IAAI,CAAC0B,kBAAD,CAA/B,CAAD,CAAT;AACH","sourcesContent":["import {takeLatest,put,call,all} from 'redux-saga/effects'\nimport userActionConstants from './userActionConstants'\nimport {googleProvider,auth,createUserProfileDocument} from '../../FireBase/firebase.utils'\nimport {googleSignInSuccess,googleSignInFailed,emailSignInSuccess,emailSignFailed} from './user.action'\n\n\nexport function* signInWithGoogle(){\n   try{\n    const {user}=yield auth.signInWithPopup(googleProvider);\n    const userRef=yield call(createUserProfileDocument,user);\n    const userSnapshot=yield userRef.get()\n    //console.log('userSnapshotData->',userSnapshot.data())\n    yield put(googleSignInSuccess({id:userSnapshot.id,...userSnapshot.data()}))\n}\ncatch(error){\n    yield put(googleSignInFailed(error))\n}\n}\n\nexport function* signInWithEmail ({payload:{email,password}}){\n    try{\n        const {user}=yield auth.signInWithEmailAndPassword(email,password)\n        //console.log('user->',user)\n        const userRef=yield call(createUserProfileDocument,user);\n        const userSnapshot=yield userRef.get()\n    //console.log('userSnapshotData->',userSnapshot.data())\n    yield put(emailSignInSuccess({id:userSnapshot.id,...userSnapshot.data()}))\n    }\n    catch(error){\n       yield put(emailSignFailed(error))\n    }\n}\n\nexport function* onGoogleSignInStart (){\n    yield takeLatest(userActionConstants.GOOGLE_SIGNIN_START,signInWithGoogle)\n}\n\n\n\nexport function* onEmailSignInStart(){\n    yield takeLatest(userActionConstants.EMAIL_SIGNIN_START,signInWithEmail)\n}\n\nexport function* userSaga(){\n    yield all([call(onGoogleSignInStart),call(onEmailSignInStart)])\n}"]},"metadata":{},"sourceType":"module"}